layui.define("layer",function(f){var h=layui.$,k=layui.layer,e=layui.hint(),b=layui.device(),n="form",c=".layui-form",p="layui-this",o="layui-show",g="layui-hide",j="layui-disabled",i=function(){this.config={verify:{required:[/[\S]+/,"必填项不能为空"],phone:[/^1\d{10}$/,"请输入正确的手机号"],email:[/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,"邮箱格式不正确"],url:[/(^#)|(^http(s*):\/\/[^\s]+\.[^\s]+)/,"链接格式不正确"],number:function(q){if(!q||isNaN(q)){return"只能填写数字"}},date:[/^(\d{4})[-\/](\d{1}|0\d{1}|1[0-2])([-\/](\d{1}|0\d{1}|[1-2][0-9]|3[0-1]))*$/,"日期格式不正确"],identity:[/(^\d{15}$)|(^\d{17}(x|X|\d)$)/,"请输入正确的身份证号"]}}};i.prototype.set=function(q){var r=this;h.extend(true,r.config,q);return r};i.prototype.verify=function(q){var r=this;h.extend(true,r.config.verify,q);return r};i.prototype.on=function(q,r){return layui.onevent.call(this,n,q,r)};Array.prototype.indexOfElem=function(r){for(var q=0;q<this.length;q++){if(this[q]==r){return q}}return -1};Array.prototype.removeElem=function(r){var q=this.indexOfElem(r);if(q>-1){this.splice(q,1)}};i.prototype.hidePlaceholder=function(r,q){if(r.find(".multiSelect a").length!=0){r.children("input.layui-input").attr("placeholder","")}else{r.children("input.layui-input").attr("placeholder",q.find("option:eq(0)").text())}};i.prototype.render=function(s,r){var t=this,u=h(c+function(){return r?('[lay-filter="'+r+'"]'):""}()),q={select:function(){var x="请选择",D="layui-form-select",w="layui-select-title",z="layui-select-none",B="",v,A=u.find("select"),y=function(F,E){if(!h(F.target).parent().hasClass(w)||E){h("."+D).removeClass(D+"ed "+D+"up");v&&B&&v.val(B)}v=null},C=function(M,G,K){var O=h(this),L=M.find("."+w),N=L.find("input"),F=L.find(".multiSelect"),I=M.find("dl"),P=I.children("dd");t.hidePlaceholder(L,O);if(G){return}var J=function(){var S=M.offset().top+M.outerHeight()+5-l.scrollTop(),R=I.outerHeight();M.addClass(D+"ed");P.removeClass(g);if(S+R>l.height()&&S>=R){M.addClass(D+"up")}},H=function(R){M.removeClass(D+"ed "+D+"up");N.blur();if(R){return}E(N.val(),function(S){if(S){B=I.find("."+p).html();N&&N.val(B)}})};L.on("click",function(R){if(typeof O.attr("multiple")&&typeof O.attr("multiple")==="string"){if(!M.hasClass(D+"ed")){J()}}else{M.hasClass(D+"ed")?(H()):(y(R,true),J());I.find("."+z).remove()}R.stopPropagation();h(document).not(L.find(".layui-anim")).off("click",y).on("click",y)});L.find(".layui-edge").on("click",function(){N.focus()});N.on("keyup",function(S){var R=S.keyCode;if(R===9){J()}}).on("keydown",function(S){var R=S.keyCode;if(R===9){H()}else{if(R===13){S.preventDefault()}}});var E=function(U,V,R){var S=0;layui.each(P,function(){var X=h(this),Y=X.text(),W=Y.indexOf(U)===-1;if(U===""||(R==="blur")?U!==Y:W){S++}R==="keyup"&&X[W?"addClass":"removeClass"](g)});var T=S===P.length;return V(T),T};var Q=function(T){var R=this.value,S=T.keyCode;if(S===9||S===13||S===37||S===38||S===39||S===40){return false}E(R,function(U){if(U){I.find("."+z)[0]||I.append('<p class="'+z+'">无匹配项</p>')}else{I.find("."+z).remove()}},"keyup");if(R===""){I.find("."+z).remove()}};if(K){N.on("keyup",Q).on("blur",function(R){v=N;B=I.find("."+p).html();setTimeout(function(){E(N.val(),function(S){B||N.val("")},"blur")},200)})}L.delegate(".multiSelect a i","click",function(S){var R=O.val()||[];var T=h(this);S.stopPropagation();L.find("dd").each(function(){if(h(this).find("span").text()==T.siblings("span").text()){var U=h(this);h(this).find("input").removeAttr("checked");h(this).find(".layui-form-checkbox").removeClass("layui-form-checked");R.removeElem(h(this).attr("lay-value"));O.val(R);layui.event.call(this,n,"select("+O.attr("lay-filter")+")",{elem:O[0],value:R,othis:M})}});h(this).parent("a").remove();t.hidePlaceholder(L,O)});P.on("click",function(){var U=h(this),T=U.attr("lay-value"),R=O.val()||[];var S=O.attr("lay-filter");if(U.hasClass(j)){return false}if(typeof O.attr("multiple")&&typeof O.attr("multiple")==="string"){if(U.find("input[type='checkbox']").is(":checked")){F.html(F.html()+"<a href='javascript:;'><span>"+U.find("span").text()+"</span><i></i></a>");R.push(T)}else{F.find("a").each(function(){if(h(this).find("span").text()==U.find("span").text()){h(this).remove();R.removeElem(T)}})}O.val(R).removeClass("layui-form-danger");layui.event.call(this,n,"select("+S+")",{elem:O[0],valueStr:R,othis:M});t.hidePlaceholder(L,O)}else{if(U.hasClass("layui-select-tips")){N.val("")}else{N.val(U.text());U.addClass(p)}U.siblings().removeClass(p);O.val(T).removeClass("layui-form-danger");layui.event.call(this,n,"select("+S+")",{elem:O[0],value:T,othis:M});H(true);return false}});M.find("dl>dt").on("click",function(R){return false})};A.each(function(K,N){var E=h(this),F=E.next("."+D),G=this.disabled,H=h(N.options[N.selectedIndex]),I=N.options[0];if(typeof E.attr("multiple")&&typeof E.attr("multiple")==="string"){var P=h(N).val()}else{var P=N.value}if(typeof E.attr("lay-ignore")==="string"){return E.show()}var L=typeof E.attr("lay-search")==="string",J=typeof E.attr("multiple")==="string",O=I?(I.value?x:(I.innerHTML||x)):x;
if(typeof E.attr("multiple")&&typeof E.attr("multiple")==="string"){var M=h(['<div class="'+(J?"":"layui-unselect ")+D+(G?" layui-select-disabled":"")+'">','<div class="'+w+'"><input type="text" class="layui-input" placeholder="'+O+'"><div class="layui-input multiSelect" >'+function(){var R=[];if(P!=null&&P!=undefined&&P.length!=0){for(var Q=0;Q<N.options.length;Q++){if(N.options[Q].selected){R.push("<a href='javascript:;'><span>"+N.options[Q].text+"</span><i></i></a>")}}}return R.join("")}(E.find("*"))+'<i class="layui-edge"></i></div>','<dl class="layui-anim layui-anim-upbit'+(E.find("optgroup")[0]?" layui-select-group":"")+'">'+function(R){var Q=[];layui.each(R,function(S,U){if(S===0&&!U.value){Q.push('<dd lay-value="" class="layui-select-tips">'+(U.innerHTML||x)+"</dd>")}else{if(P!=null&&P!=undefined&&P.length!=0){for(var T=0;T<P.length;T++){if(P[T]==U.value){Q.push('<dd lay-value="'+U.value+'">'+'<input type="checkbox" '+(U.disabled?"disabled":"")+' checked lay-filter="searchChecked" title="'+U.innerHTML+'" lay-skin="primary"></dd>');return false}}}Q.push('<dd lay-value="'+U.value+'">'+'<input type="checkbox" '+(U.disabled?"disabled":"")+' lay-filter="searchChecked" title="'+U.innerHTML+'" lay-skin="primary"></dd>')}});Q.length===0&&Q.push('<dd lay-value="" class="'+j+'">没有选项</dd>');return Q.join("")}(E.find("*"))+"</dl>","</div>"].join(""));F[0]&&F.remove();E.after(M);C.call(this,M,G,J)}else{var M=h(['<div class="'+(L?"":"layui-unselect ")+D+(G?" layui-select-disabled":"")+'">','<div class="'+w+'"><input type="text" placeholder="'+O+'" value="'+(P?H.html():"")+'" '+(L?"":"readonly")+' class="layui-input'+(L?"":" layui-unselect")+(G?(" "+j):"")+'">','<i class="layui-edge"></i></div>','<dl class="layui-anim layui-anim-upbit'+(E.find("optgroup")[0]?" layui-select-group":"")+'">'+function(R){var Q=[];layui.each(R,function(S,T){if(S===0&&!T.value){Q.push('<dd lay-value="" class="layui-select-tips">'+(T.innerHTML||x)+"</dd>")}else{if(T.tagName.toLowerCase()==="optgroup"){Q.push("<dt>"+T.label+"</dt>")}else{Q.push('<dd lay-value="'+T.value+'" class="'+(P===T.value?p:"")+(T.disabled?(" "+j):"")+'">'+T.innerHTML+"</dd>")}}});Q.length===0&&Q.push('<dd lay-value="" class="'+j+'">没有选项</dd>');return Q.join("")}(E.find("*"))+"</dl>","</div>"].join(""));F[0]&&F.remove();E.after(M);C.call(this,M,G,L)}})},checkbox:function(){var x={checkbox:["layui-form-checkbox","layui-form-checked","checkbox"],_switch:["layui-form-switch","layui-form-onswitch","switch"]},v=u.find("input[type=checkbox]"),w=function(A,z){var y=h(this);A.on("click",function(){var B=y.attr("lay-filter"),C=(y.attr("lay-text")||"").split("|");if(y[0].disabled){return}y[0].checked?(y[0].checked=false,A.removeClass(z[1]).find("em").text(C[1])):(y[0].checked=true,A.addClass(z[1]).find("em").text(C[0]));layui.event.call(y[0],n,z[2]+"("+B+")",{elem:y[0],value:y[0].value,othis:A})})};v.each(function(C,y){var z=h(this),G=z.attr("lay-skin"),F=(z.attr("lay-text")||"").split("|"),B=this.disabled;if(G==="switch"){G="_"+G}var E=x[G]||x.checkbox;if(typeof z.attr("lay-ignore")==="string"){return z.show()}var A=z.next("."+E[0]);var D=h(['<div class="layui-unselect '+E[0]+(y.checked?(" "+E[1]):"")+(B?" layui-checkbox-disbaled "+j:"")+'" lay-skin="'+(G||"")+'">',{_switch:"<em>"+((y.checked?F[0]:F[1])||"")+"</em><i></i>"}[G]||((y.title.replace(/\s/g,"")?("<span>"+y.title+"</span>"):"")+'<i class="layui-icon">'+(G?"&#xe605;":"&#xe618;")+"</i>"),"</div>"].join(""));A[0]&&A.remove();z.after(D);w.call(this,D,E)})},radio:function(){var w="layui-form-radio",y=["&#xe643;","&#xe63f;"],x=u.find("input[type=radio]"),v=function(A){var B=h(this),z="layui-anim-scaleSpring";A.on("click",function(){var D=B[0].name,C=B.parents(c);var F=B.attr("lay-filter");var E=C.find("input[name="+D.replace(/(\.|#|\[|\])/g,"\\$1")+"]");if(B[0].disabled){return}layui.each(E,function(){var G=h(this).next("."+w);this.checked=false;G.removeClass(w+"ed");G.find(".layui-icon").removeClass(z).html(y[1])});B[0].checked=true;A.addClass(w+"ed");A.find(".layui-icon").addClass(z).html(y[0]);layui.event.call(B[0],n,"radio("+F+")",{elem:B[0],value:B[0].value,othis:A})})};x.each(function(C,B){var E=h(this),z=E.next("."+w),D=this.disabled;if(typeof E.attr("lay-ignore")==="string"){return E.show()}z[0]&&z.remove();var A=h(['<div class="layui-unselect '+w+(B.checked?(" "+w+"ed"):"")+(D?" layui-radio-disbaled "+j:"")+'">','<i class="layui-anim layui-icon">'+y[B.checked?0:1]+"</i>","<div>"+function(){var F=B.title||"";if(typeof E.next().attr("lay-radio")==="string"){F=E.next().html();E.next().remove()}return F}()+"</div>","</div>"].join(""));E.after(A);v.call(this,A)})}};s?(q[s]?q[s]():e.error("不支持的"+s+"表单渲染")):layui.each(q,function(v,w){w()});return t};var m=function(){var v=h(this),y=a.config.verify,z=null,w="layui-form-danger",A={},u=v.parents(c),q=u.find("*[lay-verify]"),s=v.parents("form")[0],r=u.find("input,select,textarea"),t=v.attr("lay-filter");layui.each(q,function(C,D){var F=h(this),B=F.attr("lay-verify").split("|"),G=F.attr("lay-verType"),E=F.val();
F.removeClass(w);layui.each(B,function(L,J){var I,H="",K=typeof y[J]==="function";if(y[J]){var I=K?H=y[J](E,D):!y[J][0].test(E);H=H||y[J][1];if(I){if(G==="tips"){k.tips(H,function(){if(typeof F.attr("lay-ignore")!=="string"){if(D.tagName.toLowerCase()==="select"||/^checkbox|radio$/.test(D.type)){return F.next()}}return F}(),{tips:1})}else{if(G==="alert"){k.alert(H,{title:"提示",shadeClose:true})}else{k.msg(H,{icon:5,shift:6})}}if(!b.android&&!b.ios){D.focus()}F.addClass(w);return z=true}}});if(z){return z}});if(z){return false}var x={};layui.each(r,function(B,D){D.name=(D.name||"").replace(/^\s*|\s*&/,"");if(!D.name){return}if(/^.*\[\]$/.test(D.name)){var C=D.name.match(/^(.*)\[\]$/g)[0];x[C]=x[C]|0;D.name=D.name.replace(/^(.*)\[\]$/,"$1["+(x[C]++)+"]")}if(/^checkbox|radio$/.test(D.type)&&!D.checked){return}A[D.name]=D.value});return layui.event.call(this,n,"submit("+t+")",{elem:this,form:s,field:A})};var a=new i(),d=h(document),l=h(window);a.render();d.on("reset",c,function(){var q=h(this).attr("lay-filter");setTimeout(function(){a.render(null,q)},50)});d.on("submit",c,m).on("click","*[lay-submit]",m);f(n,a)});